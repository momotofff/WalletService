databaseChangeLog:
  - changeSet:
      id: 002-add-created-at-column
      author: system
      changes:
        - addColumn:
            tableName: wallets
            columns:
              - column:
                  name: created_at
                  type: TIMESTAMP
                  defaultValueComputed: "CURRENT_TIMESTAMP"

        - addColumn:
            tableName: wallets
            columns:
              - column:
                  name: updated_at
                  type: TIMESTAMP
                  defaultValueComputed: "CURRENT_TIMESTAMP"

        - sql:
            sql: "CREATE OR REPLACE FUNCTION update_updated_at_column() RETURNS TRIGGER AS $$ BEGIN NEW.updated_at = NOW(); RETURN NEW; END; $$ language 'plpgsql';"

        - sql:
            sql: "CREATE TRIGGER update_wallets_updated_at BEFORE UPDATE ON wallets FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();"